{"version":3,"sources":["js/index/particle.js"],"names":["window","zsj","Particle","board","ctx","canvasW","canvasH","this","_board","_ctx","_canvasW","_canvasH","_trail","Trail","prototype","create","options","_shape","shape","_size","size","_color","color","_twikle","twikle","_gradient","gradient","alpha","Math","random","_alpha","_alphaMax","_alphaMin","_alphaDuration","floor","_alphaStep","trail","startPos","endPos","duration","starttime","rotatecount","movecount","rotatedir","creaetGradient","drawDot","beginPath","fillStyle","_grdStyle","globalAlpha","fillRect","curPos","x","w","y","h","closePath","arc","PI","fill","restore","save","createRadialGradient","max","addColorStop","r","alphaChange","animate","t","controlMove"],"mappings":"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","file":"particle.min.js","sourcesContent":["window.zsj = window.zsj || {};\r\n(function () {\r\n    function Particle(board, ctx, canvasW, canvasH) {\r\n        this._board = board;\r\n        this._ctx = ctx;\r\n        this._canvasW = canvasW;\r\n        this._canvasH = canvasH;\r\n        this._trail = new zsj.Trail(this._canvasW, this._canvasH);\r\n    }\r\n    Particle.prototype = {\r\n        create: function (options) {\r\n            this._shape = options.shape;//rect round\r\n            this._size = options.size;//{w,h} r\r\n            this._color = options.color;\r\n            this._twikle = options.twikle;//0不闪烁 1闪烁\r\n            this._gradient = options.gradient;//0不渐变 1渐变\r\n            var alpha = Math.random() * 0.7 + 0.5;\r\n            this._alpha = (this._twikle) ? ((alpha) > 1 ? 1 : alpha) : 1;\r\n            if (this._twikle) {\r\n                this._alphaMax = this._alpha;\r\n                this._alphaMin = this._alpha - 0.5;\r\n                this._alphaDuration = Math.floor(Math.random() * 80) + 20;\r\n                this._alphaStep = -0.5 / this._alphaDuration;\r\n            }\r\n            this._trail.create({\r\n                trail: options.trail,\r\n                startPos: options.startPos,\r\n                endPos: options.endPos,\r\n                duration: options.duration,\r\n                starttime: options.starttime,\r\n                rotatecount: options.movecount,\r\n                rotatedir: 1\r\n            });\r\n            if (this._gradient) {\r\n                this.creaetGradient(options);\r\n            }\r\n            this.drawDot();\r\n        },\r\n        drawDot: function () {\r\n            switch (this._shape) {\r\n                case 'rect':\r\n                    this._ctx.beginPath();\r\n                    this._ctx.fillStyle = (this._gradient) ? this._grdStyle : this._color;\r\n                    this._ctx.globalAlpha = this._alpha;\r\n                    this._ctx.fillRect(this._trail.curPos.x - this._size.w / 2, this._trail.curPos.y - this._size.h / 2, this._size.w, this._size.h);\r\n                    this._ctx.closePath();\r\n                    break;\r\n                case 'round':\r\n                    this._ctx.beginPath();\r\n                    this._ctx.fillStyle = (this._gradient) ? this._grdStyle : this._color;\r\n                    this._ctx.globalAlpha = this._alpha;\r\n                    this._ctx.arc(this._trail.curPos.x, this._trail.curPos.y, this._size, 0, 2 * Math.PI);\r\n                    this._ctx.fill();\r\n                    this._ctx.closePath();\r\n                    break;\r\n                default:\r\n                    break;\r\n            };\r\n            this._ctx.restore();\r\n        },\r\n        creaetGradient: function (options) {\r\n            var startPos = this._trail.startPos;\r\n            var endPos = this._trail.endPos;\r\n            var curPos=this._trail.curPos;\r\n            this._ctx.save();\r\n            switch (this._shape) {\r\n                case 'rect':\r\n                    var w = this._size.w;\r\n                    var h = this._size.h;\r\n                    this._grdStyle = this._ctx.createRadialGradient(curPos.x - w / 2, curPos.y - h, Math.max(w, h) / 2, curPos.x + w / 2, curPos.y + h / 2, Math.max(w, h));\r\n                    this._grdStyle.addColorStop(0, 'transparent');\r\n                    this._grdStyle.addColorStop(1, this._color);\r\n                    break;\r\n                case 'round':\r\n                    var r = this._size;\r\n                    this._grdStyle = this._ctx.createRadialGradient(curPos.x, curPos.y, r / 2, curPos.x , curPos.y, r);\r\n                    this._grdStyle.addColorStop(0, this._color);\r\n                    this._grdStyle.addColorStop(1, 'transparent');\r\n                    break;\r\n                default:\r\n                    break;\r\n            };\r\n        },\r\n        alphaChange: function () {\r\n            this._alpha += this._alphaStep\r\n            if (this._alpha >= this._alphaMax) {\r\n                this._alphaStep *= -1;\r\n            } else if (this._alpha <= this._alphaMin) {\r\n                this._alphaStep *= -1;\r\n            }\r\n        },\r\n        animate: function (t) {\r\n            this._trail.controlMove(t);\r\n            this.creaetGradient();\r\n            this.alphaChange();\r\n            this.drawDot();\r\n        }\r\n\r\n    };\r\n    zsj.Particle = Particle;\r\n})();"]}