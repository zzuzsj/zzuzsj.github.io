{"version":3,"sources":["js/index/index.js"],"names":["window","zsj","animate","passTime","ctx","globalCompositeOperation","globalAlpha","fillStyle","fillRect","containerWid","containerHei","drawImage","backImage","i","particleArr","length","stats","begin","end","requestAnimationFrame","getWindowSize","windowWid","windowHei","innerWidth","innerHeight","document","documentElement","clientWidth","clientHeight","w","h","layer","layui","$","css","width","height","attr","Stats","setMode","domElement","style","position","right","top","body","appendChild","Image","src","board","getElementById","getContext","psize","pduration","particle","Particle","pstartPos","x","Math","floor","random","max","abs","y","pendPos","ser","_trail","getDistance","inpduration","outpduration","create","shape","size","color","trail","startPos","endPos","twikle","gradient","duration","starttime","movecount","push","on","prompt","title","formType","maxlength","val","index","msg","close"],"mappings":"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","file":"index.min.js","sourcesContent":["window.zsj = window.zsj || {};\r\n(function () {\r\n    var containerWid = 0;\r\n    var containerHei = 0;\r\n    containerWid = getWindowSize().w;\r\n    containerHei = getWindowSize().h;\r\n    var layer = layui.layer;\r\n    $('#container').css({\r\n        width: containerWid + 'px',\r\n        height: containerHei + 'px'\r\n    });\r\n    $('#skyImage').css({\r\n        width: containerWid + 'px',\r\n        height: containerHei + 'px'\r\n    });\r\n\r\n    $('#sky').attr('width', containerWid);\r\n    $('#sky').attr('height', containerHei);\r\n\r\n    var stats = new Stats();\r\n    stats.setMode(0); // 0: fps, 1: ms \r\n\r\n    // Align top-left \r\n    stats.domElement.style.position = 'absolute';\r\n    stats.domElement.style.right = '0px';\r\n    stats.domElement.style.top = '0px';\r\n\r\n    document.body.appendChild(stats.domElement);\r\n\r\n    var backImage = new Image();\r\n    backImage.src = \"res/index/bj.jpg\";\r\n\r\n    var board = document.getElementById('sky');\r\n    var ctx = board.getContext('2d');\r\n    var passTime = 0;\r\n\r\n    var particleArr = [];\r\n    var total = 1000;\r\n    for (var i = 0; i < total; i++) {\r\n        // var delay = Math.floor(Math.random() * 100);\r\n        (function (i) {\r\n            var particle = new zsj.Particle(board, ctx, containerWid, containerHei);\r\n            var pcolor = '#27f';\r\n            var pstartPos = {\r\n                x: Math.floor(Math.random() * Math.max(containerHei, containerWid)) - (Math.max(containerHei, containerWid) == containerWid ? 0 : Math.abs(containerWid - containerHei) / 2),\r\n                y: Math.floor(Math.random() * Math.max(containerHei, containerWid)) - (Math.max(containerHei, containerWid) == containerHei ? 0 : Math.abs(containerWid - containerHei) / 2)\r\n            };\r\n            var pendPos = {\r\n                x: containerWid / 2,\r\n                y: containerHei / 2\r\n            };\r\n            var ser = particle._trail.getDistance(pstartPos, pendPos);\r\n            var psize, pduration;\r\n            var inpduration=Math.floor(Math.random() * 12);\r\n            var outpduration=Math.floor(Math.random() * 15);\r\n            if (ser < (containerHei / 4)) {\r\n                psize = Math.floor(Math.random() * 1) + 1;\r\n                pduration = (inpduration<4?0:inpduration) * 400;\r\n            } else {\r\n                psize = Math.floor(Math.random() * 2) + 1;\r\n                pduration = (outpduration<2?0:outpduration) * 400;\r\n            }\r\n            particle.create({\r\n                shape: 'round',//'round' 'rect'\r\n                size: psize,//r {w,h}\r\n                color: pcolor,\r\n                trail: 'round',//'line' 'curve2' 'curve3' 'round'\r\n                startPos: pstartPos,\r\n                endPos: pendPos,\r\n                twikle: 1,\r\n                gradient: 0,\r\n                duration: pduration,\r\n                starttime: 0,\r\n                movecount: 0\r\n            });\r\n            particleArr.push(particle);\r\n\r\n        })(i);\r\n    }\r\n    // var shadowClear = 'rgba(255,255,255,0.1)'\r\n    animate();\r\n    addEvents();\r\n\r\n    function animate() {\r\n        passTime++;\r\n        if(passTime>=100000){\r\n            passTime==0;\r\n        }\r\n        // ctx.fillStyle = shadowClear;\r\n        // // ctx.clearRect(0, 0, containerWid, containerHei);\r\n        // ctx.fillRect(0, 0, containerWid, containerHei);\r\n        ctx.globalCompositeOperation = 'source-over';\r\n        ctx.globalAlpha = 0.5; //尾巴\r\n        ctx.fillStyle = 'hsla(' + 255 + ', 64%, 6%, .8)';\r\n        // ctx.fillStyle=\"rgba(255,255,255,0.3)\";\r\n        ctx.fillRect(0, 0, containerWid, containerHei);\r\n\r\n        ctx.globalCompositeOperation = 'lighter';\r\n        ctx.drawImage(backImage, 0, 0, containerWid, containerHei);\r\n        for (var i = 0; i < particleArr.length; i++) {\r\n            var particle = particleArr[i];\r\n            particle.animate(passTime);\r\n        }\r\n        stats.begin();\r\n\r\n        // your code goes here \r\n\r\n        stats.end();\r\n        requestAnimationFrame(animate);\r\n    }\r\n\r\n    function getWindowSize() {\r\n        var windowWid = 0;\r\n        var windowHei = 0;\r\n        if (window.innerWidth && window.innerHeight) {\r\n            windowWid = window.innerWidth;\r\n            windowHei = window.innerHeight;\r\n        } else {\r\n            windowWid = document.documentElement.clientWidth;\r\n            windowHei = document.documentElement.clientHeight;\r\n        }\r\n        return {\r\n            w: windowWid,\r\n            h: windowHei\r\n        }\r\n    }\r\n\r\n    function addEvents() {\r\n        $('#resume').on('click', function () {\r\n            layer.prompt({\r\n                title: '请输入密码',\r\n                formType: 1,\r\n                maxlength: 20\r\n            },\r\n                function (val, index) {\r\n                    if (val == \"sai\") {\r\n                        layer.msg('密码正确');\r\n                    } else {\r\n                        layer.msg('密码错误');\r\n                    }\r\n                    layer.close(index);\r\n                });\r\n        })\r\n    }\r\n})();\r\n"]}