{"version":3,"sources":["js/index/index.js"],"names":["window","zsj","init","full","containerWid","screen","width","containerHei","height","getWindowSize","w","h","$","css","attr","i","psize","pduration","particle","Particle","board","ctx","pstartPos","x","Math","floor","random","max","abs","y","pendPos","ser","_trail","getDistance","inpduration","outpduration","create","shape","size","color","trail","startPos","endPos","twikle","gradient","duration","starttime","movecount","particleArr","push","animate","addEvents","fullScreen","docElm","document","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","elem","msRequestFullscreen","passTime","globalCompositeOperation","globalAlpha","fillStyle","fillRect","drawImage","backImage","length","stats","begin","end","requestAnimationFrame","windowWid","windowHei","innerWidth","innerHeight","clientWidth","clientHeight","on","layer","prompt","title","formType","maxlength","val","index","msg","close","this","backAudio","pause","background","background-size","play","layui","Image","src","getElementById","getContext","confirm","btn","Stats","setMode","domElement","style","position","right","top","body","appendChild"],"mappings":"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","file":"index.min.js","sourcesContent":["window.zsj = window.zsj || {};\r\n(function () {\r\n\r\n\r\n    var layer = layui.layer;\r\n    var passTime = 0;\r\n    var backImage = new Image();\r\n    var containerWid = 0;\r\n    var containerHei = 0;\r\n    backImage.src = \"res/index/bj.jpg\";\r\n\r\n    var backAudio = document.getElementById('backAudio');\r\n\r\n    var board = document.getElementById('sky');\r\n    var ctx = board.getContext('2d');\r\n    var particleArr = [];\r\n\r\n    layer.confirm('是否需要全屏预览', {\r\n        btn: ['好的', '不用'] //按钮\r\n    }, function (index) {\r\n        fullScreen();\r\n        layer.close(index);\r\n        init(1);\r\n    }, function (index) {\r\n        layer.close(index);\r\n        init(0);\r\n    });\r\n\r\n    function init(full) {\r\n        if (!full) {\r\n            containerWid = getWindowSize().w;\r\n            containerHei = getWindowSize().h;\r\n        } else {\r\n            containerWid = screen.width;\r\n            containerHei = screen.height;\r\n        }\r\n        $('#container').css({\r\n            width: containerWid + 'px',\r\n            height: containerHei + 'px'\r\n        });\r\n        $('#skyImage').css({\r\n            width: containerWid + 'px',\r\n            height: containerHei + 'px'\r\n        });\r\n\r\n        $('#sky').attr('width', containerWid);\r\n        $('#sky').attr('height', containerHei);\r\n\r\n        var total = 1400;\r\n        for (var i = 0; i < total; i++) {\r\n            // var delay = Math.floor(Math.random() * 100);\r\n            (function (i) {\r\n                var particle = new zsj.Particle(board, ctx, containerWid, containerHei);\r\n                var pcolor = '#3388ff';\r\n                var pstartPos = {\r\n                    x: Math.floor(Math.random() * Math.max(containerHei, containerWid)) - (Math.max(containerHei, containerWid) == containerWid ? 0 : Math.abs(containerWid - containerHei) / 2),\r\n                    y: Math.floor(Math.random() * Math.max(containerHei, containerWid)) - (Math.max(containerHei, containerWid) == containerHei ? 0 : Math.abs(containerWid - containerHei) / 2)\r\n                };\r\n                var pendPos = {\r\n                    x: containerWid / 2,\r\n                    y: containerHei / 2\r\n                };\r\n                var ser = particle._trail.getDistance(pstartPos, pendPos);\r\n                var psize, pduration;\r\n                var inpduration = Math.floor(Math.random() * 18);\r\n                var midduration = Math.floor(Math.random() * 16);\r\n                var outpduration = Math.floor(Math.random() * 14);\r\n                if (ser < (containerHei / 3)) {\r\n                    psize = Math.floor(Math.random() * 3) + 1;\r\n                    pduration = (inpduration < 6 ? 0 : inpduration) * 400;\r\n                } else if (ser < (containerHei / 3 * 2)) {\r\n                    psize = Math.floor(Math.random() * 3) + 1;\r\n                    pduration = (inpduration < 5 ? 0 : inpduration) * 400;\r\n                } else {\r\n                    psize = Math.floor(Math.random() * 4) + 1;\r\n                    pduration = (outpduration < 4 ? 0 : outpduration) * 500;\r\n                }\r\n                particle.create({\r\n                    shape: 'round',//'round' 'rect'\r\n                    size: psize,//r {w,h}\r\n                    color: pcolor,\r\n                    trail: 'round',//'line' 'curve2' 'curve3' 'round'\r\n                    startPos: pstartPos,\r\n                    endPos: pendPos,\r\n                    twikle: 1,\r\n                    gradient: 1,\r\n                    duration: pduration,\r\n                    starttime: 0,\r\n                    movecount: 0\r\n                });\r\n                particleArr.push(particle);\r\n\r\n            })(i);\r\n        }\r\n        // var shadowClear = 'rgba(255,255,255,0.1)'\r\n        animate();\r\n        addEvents();\r\n    }\r\n\r\n    var stats = new Stats();\r\n    stats.setMode(0); // 0: fps, 1: ms \r\n\r\n    // Align top-left \r\n    stats.domElement.style.position = 'absolute';\r\n    stats.domElement.style.right = '0px';\r\n    stats.domElement.style.top = '0px';\r\n    document.body.appendChild(stats.domElement);\r\n\r\n\r\n    function fullScreen() {\r\n        var docElm = document.documentElement;\r\n        //W3C \r\n        if (docElm.requestFullscreen) {\r\n            docElm.requestFullscreen();\r\n        }\r\n        //FireFox \r\n        else if (docElm.mozRequestFullScreen) {\r\n            docElm.mozRequestFullScreen();\r\n        }\r\n        //Chrome等 \r\n        else if (docElm.webkitRequestFullScreen) {\r\n            docElm.webkitRequestFullScreen();\r\n        }\r\n        //IE11\r\n        else if (elem.msRequestFullscreen) {\r\n            elem.msRequestFullscreen();\r\n        }\r\n\r\n    }\r\n    function animate() {\r\n        passTime++;\r\n        if (passTime >= 100000) {\r\n            passTime == 0;\r\n        }\r\n        // ctx.fillStyle = shadowClear;\r\n        // // ctx.clearRect(0, 0, containerWid, containerHei);\r\n        // ctx.fillRect(0, 0, containerWid, containerHei);\r\n        ctx.globalCompositeOperation = 'source-over';\r\n        ctx.globalAlpha = 0.5; //尾巴\r\n        ctx.fillStyle = 'hsla(' + 255 + ', 64%, 6%, .8)';\r\n        // ctx.fillStyle=\"rgba(255,255,255,0.3)\";\r\n        ctx.fillRect(0, 0, containerWid, containerHei);\r\n\r\n        ctx.globalCompositeOperation = 'lighter';\r\n        ctx.drawImage(backImage, 0, 0, containerWid, containerHei);\r\n        for (var i = 0; i < particleArr.length; i++) {\r\n            var particle = particleArr[i];\r\n            particle.animate(passTime);\r\n        }\r\n        stats.begin();\r\n\r\n        // your code goes here \r\n\r\n        stats.end();\r\n        requestAnimationFrame(animate);\r\n    }\r\n\r\n    function getWindowSize() {\r\n        var windowWid = 0;\r\n        var windowHei = 0;\r\n        if (window.innerWidth && window.innerHeight) {\r\n            windowWid = window.innerWidth;\r\n            windowHei = window.innerHeight;\r\n        } else {\r\n            windowWid = document.documentElement.clientWidth;\r\n            windowHei = document.documentElement.clientHeight;\r\n        }\r\n        return {\r\n            w: windowWid,\r\n            h: windowHei\r\n        }\r\n    }\r\n\r\n    function addEvents() {\r\n        $('#resume').on('click', function () {\r\n            layer.prompt({\r\n                title: '请输入密码',\r\n                formType: 1,\r\n                maxlength: 20\r\n            },\r\n                function (val, index) {\r\n                    if (val == \"sai\") {\r\n                        layer.msg('密码正确');\r\n                    } else {\r\n                        layer.msg('密码错误');\r\n                    }\r\n                    layer.close(index);\r\n                });\r\n        })\r\n        $('#musicControl').on('click', function () {\r\n            var status = $(this).attr('data-status');\r\n            switch (status) {\r\n                case 'play':\r\n                    $(this).attr('data-status', 'pause');\r\n                    backAudio.pause();\r\n                    $(this).css({ 'background': 'url(\"./res/index/play.png\") no-repeat center', 'background-size': '40px 40px' });\r\n                    break;\r\n                case 'pause':\r\n                    $(this).attr('data-status', 'play');\r\n                    backAudio.play();\r\n                    $(this).css({ 'background': 'url(\"./res/index/pause.png\") no-repeat center', 'background-size': '50px 50px' });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n})();\r\n"]}