window.zsj=window.zsj||{},function(){function t(t,s){this.canvasWidth=t,this.canvasHeight=s}t.prototype={create:function(t){this.trial=t.trail,this.moveStyle=t.moveStyle,this.startPos=t.startPos,this.endPos=t.endPos,this.duration=t.duration,this.starttime=t.starttime||0,this.endtime=this.starttime+this.duration,this.rotatedir=t.rotatedir||0,this.rotatecount=t.rotatecount||0,this.ctrlPos1=t.ctrlPos1||null,this.ctrlPos2=t.ctrlPos2||null,this._step=t.step||1,this._rotatedcount=0,this._movedtime=0,this.curPos=this.startPos,this.selectTrail()},getDistance:function(t,s){return Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))},calculateAngle:function(t,s,i,a){var h,o=t-i,e=s-a;if(0==e&&0==o)h=0;else if(0==e&&0!=o)h=o>0?-90:90;else if(0!=e&&0==o)h=e>0?0:-180;else{var r=o/e;h=e>0&&o>0||o<0&&e>0?Math.atan(r)/Math.PI/2*360:o<0&&e<0?Math.atan(r)/Math.PI/2*360-180:Math.atan(r)/Math.PI/2*360+180}return-h/180*Math.PI},curve2equation:function(t,s,i,a){return Math.pow(1-t,2)*s+2*(1-t)*t*i+Math.pow(t,2)*a},curve3equation:function(t,s,i,a,h){return Math.pow(1-t,3)*s+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*a+Math.pow(t,3)*h},selectTrail:function(){if(0!=this.duration)switch(this.trial){case"line":this._rateX=(this.endPos.x-this.startPos.x)/this.duration,this._rateY=(this.endPos.y-this.startPos.y)/this.duration;break;case"curve2":this.ctrlPos1||(this.ctrlPos1={x:Math.floor(Math.random()*this.canvasWidth),y:Math.floor(Math.random()*this.canvasHeight)});break;case"curve3":this.ctrlPos1||(this.ctrlPos1={x:Math.floor(Math.random()*this.canvasWidth),y:Math.floor(Math.random()*this.canvasHeight)}),this.ctrlPos2||(this.ctrlPos2={x:Math.floor(Math.random()*this.canvasWidth),y:Math.floor(Math.random()*this.canvasHeight)});break;case"tween":break;case"round":this._r=this.getDistance(this.endPos,this.startPos),this._startAngle=this.calculateAngle(this.startPos.x,this.startPos.y,this.endPos.x,this.endPos.y),this._rateR=this.rotatedir?2*Math.PI/this.duration:-2*Math.PI/this.duration}},controlTime:function(t){if(this._movedtime<this.duration)0!=this.rotatecount&&this._rotatedcount++,this._movedtime+=this._step;else{if(this._rotatedcount>this.rotatecount&&0!=this.rotatecount)return;this._movedtime=0}},calculatePos:function(){var t={};if(0!=this.duration)switch(this.trial){case"line":t.x=this.startPos.x+this._rateX*this._movedtime,t.y=this.startPos.y+this._rateY*this._movedtime;break;case"curve2":var s=this._movedtime/this.duration;t.x=this.curve2equation(s,this.startPos.x,this.ctrlPos1.x,this.endPos.x),t.y=this.curve2equation(s,this.startPos.y,this.ctrlPos1.y,this.endPos.y);break;case"curve3":var s=this._movedtime/this.duration;t.x=this.curve3equation(s,this.startPos.x,this.ctrlPos1.x,this.ctrlPos2.x,this.endPos.x),t.y=this.curve3equation(s,this.startPos.y,this.ctrlPos1.y,this.ctrlPos2.y,this.endPos.y);break;case"tween":break;case"round":var i=this._startAngle+this._movedtime*this._rateR;i>180?i-=2*Math.PI:i<-180&&(i+=2*Math.PI),t.x=this.endPos.x+Math.sin(i)*this._r,t.y=this.endPos.y+Math.cos(i)*this._r}else t=this.startPos;return t},controlMove:function(t){t>this.starttime&&(this.controlTime(),this.curPos=this.calculatePos())}},zsj.Trail=t}();
//# sourceMappingURL=trail.min.js.map
