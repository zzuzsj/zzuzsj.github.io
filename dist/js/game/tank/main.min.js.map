{"version":3,"sources":["js/game/tank/main.js"],"names":["Main","this","_stageW","_stageH","_foeCreatePos","x","y","_myCreatePos","_foeCreateTime","_foeNumTotal","prototype","bindStage","that","_stage","Konva","Stage","width","height","container","listening","_layer","Layer","fastLayer","FastLayer","back","Image","add","_back","onload","image","draw","addStart","on","text","getIntersection","getPointerPosition","_startText","init","gameStart","_overText","removeChildren","_foeNum","_createdFoe","_myNum","_foePosIndex","_useTime","_foeArr","_myArr","uninit","Text","fill","fontStyle","fontSize","fontFamily","tw","th","batchDraw","addOver","_total","tow","toh","addSuccess","destroy","createMyTank","step","createFoeTank","length","gameSuccess","gameOver","i","foeTank","_destroyed","splice","tankMove","myTank","_requestId","requestAnimationFrame","ableMove","dir","_moveAble","_moveV","directChange","_continuing","disableMove","$","document","e","preventDefault","keyCode","fireBullet","window","cancelAnimationFrame","pos","FoeTank","selectType","_tankType","createTank","_tankType0","_tankType1","_tankType2","push","MyTank","_tankType3","passNumChange","_passedNum","_totalText"],"mappings":"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","file":"main.min.js","sourcesContent":["(function () {\r\n    function Main() {\r\n        this._stageW = 800;\r\n        this._stageH = 550;\r\n        this._foeCreatePos = [{ x: 100, y: 80 }, { x: this._stageW / 2, y: 80 }, { x: this._stageW - 100, y: 80 }];\r\n        this._myCreatePos = { x: this._stageW / 2, y: this._stageH - 80 };\r\n        this._foeCreateTime = 150;\r\n        this._foeNumTotal = 10;\r\n    };\r\n\r\n    Main.prototype = {\r\n        bindStage: function () {\r\n            var that = this;\r\n            that._stage = new Konva.Stage({\r\n                width: that._stageW,\r\n                height: that._stageH,\r\n                container: 'contentDiv',\r\n                listening: true\r\n            });\r\n            that._layer = new Konva.Layer();\r\n            var fastLayer = new Konva.FastLayer();\r\n            var back = new Konva.Image({\r\n                width: that._stageW,\r\n                height: that._stageH,\r\n                x: 0,\r\n                y: 0,\r\n            });\r\n            fastLayer.add(back);\r\n            that._back.onload = function () {\r\n                back.image(that._back);\r\n                fastLayer.draw();\r\n            };\r\n            that._stage.add(fastLayer);\r\n            that._stage.add(that._layer);\r\n            that.addStart();\r\n            that._stage.on('click', function () {\r\n                var text = that._layer.getIntersection(that._stage.getPointerPosition(), 'Text');\r\n                if (!text) {\r\n                    return;\r\n                };\r\n                if (text == that._startText) {\r\n                    that.init();\r\n                    that.gameStart();\r\n                } else if (text == that._overText) {\r\n                    that._stage.removeChildren();\r\n                    that._layer = new Konva.Layer();\r\n                    var fastLayer = new Konva.FastLayer();\r\n                    var back = new Konva.Image({\r\n                        width: that._stageW,\r\n                        height: that._stageH,\r\n                        x: 0,\r\n                        y: 0,\r\n                        image: that._back\r\n                    });\r\n                    fastLayer.add(back);\r\n                    that._stage.add(fastLayer);\r\n                    that._stage.add(that._layer);\r\n                    that.init();\r\n                    that.gameStart();\r\n                };\r\n            });\r\n\r\n        },\r\n        init: function () {\r\n            this._foeNum = this._foeNumTotal;\r\n            this._createdFoe = 0;\r\n            this._myNum = 1;\r\n            this._foePosIndex = 1;\r\n            this._useTime = 0;\r\n            this._foeArr = [];\r\n            this._myArr = [];\r\n        },\r\n        uninit: function () {\r\n            this._foeNum = this._foeNumTotal;\r\n            this._createdFoe = 0;\r\n            this._myNum = 1;\r\n            this._foePosIndex = 1;\r\n            this._useTime = 0;\r\n            this._foeArr = [];\r\n            this._myArr = [];\r\n        },\r\n        addStart: function () {\r\n            var that = this;\r\n            that._startText = new Konva.Text({\r\n                text: 'Game Start',\r\n                fill: 'rgb(84,38,26)',\r\n                fontStyle: 'bold',\r\n                fontSize: 30,\r\n                fontFamily: 'Times New Roman'\r\n            });\r\n            var tw = that._startText.width();\r\n            var th = that._startText.height();\r\n            that._startText.x(that._stageW / 2 - tw / 2);\r\n            that._startText.y(that._stageH / 2 - th / 2);\r\n            that._layer.add(that._startText);\r\n            that._layer.batchDraw();\r\n        },\r\n        addOver: function () {\r\n            var that = this;\r\n            that._total = new Konva.Text({\r\n                text: 'Your Score:' + (that._foeNumTotal - that._foeNum),\r\n                fill: 'rgb(64,120,255)',\r\n                fontStyle: 'bold',\r\n                fontSize: 30,\r\n                fontFamily: 'Times New Roman'\r\n            });\r\n            var tow = that._total.width();\r\n            var toh = that._total.height();\r\n            that._total.x(that._stageW / 2 - tow / 2);\r\n            that._total.y(that._stageH / 2 - toh / 2 - 20);\r\n            that._overText = new Konva.Text({\r\n                text: 'Restart',\r\n                fill: 'rgb(84,38,26)',\r\n                fontStyle: 'bold',\r\n                fontSize: 30,\r\n                fontFamily: 'Times New Roman'\r\n            });\r\n            var tw = that._overText.width();\r\n            var th = that._overText.height();\r\n            that._overText.x(that._stageW / 2 - tw / 2);\r\n            that._overText.y(that._stageH / 2 + th / 2 - 20);\r\n            that._layer.add(that._total);\r\n            that._layer.add(that._overText);\r\n            that._layer.batchDraw();\r\n        },\r\n        addSuccess: function () {\r\n            var that = this;\r\n            that._total = new Konva.Text({\r\n                text: 'You Success!',\r\n                fill: 'rgb(64,120,255)',\r\n                fontStyle: 'bold',\r\n                fontSize: 30,\r\n                fontFamily: 'Times New Roman'\r\n            });\r\n            var tow = that._total.width();\r\n            var toh = that._total.height();\r\n            that._total.x(that._stageW / 2 - tow / 2);\r\n            that._total.y(that._stageH / 2 - toh / 2 - 20);\r\n            that._overText = new Konva.Text({\r\n                text: 'Restart',\r\n                fill: 'rgb(168,120,79)',\r\n                fontStyle: 'bold',\r\n                fontSize: 30,\r\n                fontFamily: 'Times New Roman'\r\n            });\r\n            var tw = that._overText.width();\r\n            var th = that._overText.height();\r\n            that._overText.x(that._stageW / 2 - tw / 2);\r\n            that._overText.y(that._stageH / 2 + th / 2 - 20);\r\n            that._layer.add(that._total);\r\n            that._layer.add(that._overText);\r\n            that._layer.batchDraw();\r\n        },\r\n        gameStart: function () {\r\n            var that = this;\r\n            if (that._startText) {\r\n                that._startText.destroy();\r\n                that._startText = null;\r\n            } else {\r\n                that._total.destroy();\r\n                that._overText.destroy();\r\n                that._overText = null;\r\n                that._total = null;\r\n            };\r\n\r\n            that.createMyTank(that._myCreatePos);\r\n\r\n            var step = function () {\r\n                if (that._createdFoe < that._foeNumTotal) {\r\n                    if (that._useTime == 0) {\r\n                        that.createFoeTank(that._foeCreatePos[that._foePosIndex]);\r\n                        that._createdFoe++;\r\n                        that._foePosIndex++;\r\n                        if (that._foePosIndex >= that._foeCreatePos.length) {\r\n                            that._foePosIndex = 0;\r\n                        }\r\n                    }\r\n                    that._useTime++;\r\n                }\r\n                if (that._useTime == that._foeCreateTime) {\r\n                    that._useTime = 0;\r\n                }\r\n                if (that._foeNum == 0) {\r\n                    that.gameSuccess();\r\n                    return;\r\n                }\r\n                if (that._myNum == 0) {\r\n                    that.gameOver();\r\n                    return;\r\n                }\r\n                if (that._foeArr && that._foeArr.length > 0) {\r\n                    for (var i = 0; i < that._foeArr.length; i++) {\r\n                        (function (i) {\r\n                            var foeTank = that._foeArr[i];\r\n                            if (foeTank._destroyed) {\r\n                                foeTank = null;\r\n                                that._foeArr.splice(i, 1);\r\n                                that._foeNum--;\r\n                                return;\r\n                            }\r\n                            foeTank.tankMove();\r\n                        })(i);\r\n                    }\r\n                }\r\n                if (that._myArr && that._myArr.length > 0) {\r\n                    for (var i = 0; i < that._myArr.length; i++) {\r\n                        (function (i) {\r\n                            var myTank = that._myArr[i];\r\n                            if (myTank._destroyed) {\r\n                                myTank = null;\r\n                                that._myArr.splice(i, 1);\r\n                                that._myNum--;\r\n                                return;\r\n                            }\r\n                            myTank.tankMove();\r\n                        })(i);\r\n                    }\r\n                }\r\n                that._layer.batchDraw();\r\n                that._requestId = requestAnimationFrame(step);\r\n                // that.hitJudge();\r\n            };\r\n            step();\r\n            var ableMove = function (dir) {\r\n                that._myArr[0]._moveAble = true;\r\n                that._myArr[0]._moveV = 5;\r\n                that._myArr[0].directChange(dir);\r\n                that._continuing = true;\r\n            }\r\n            var disableMove = function () {\r\n                if (that._myArr.length > 0) {\r\n                    that._myArr[0]._moveAble = false;\r\n                    that._myArr[0]._moveV = 0;\r\n                }\r\n            }\r\n            $(document).on('keydown', function (e) {\r\n                e.preventDefault();\r\n                if (that._myArr.length <= 0) {\r\n                    return;\r\n                }\r\n                // disableMove();\r\n                switch (e.keyCode) {\r\n                    case 37:\r\n                        ableMove(3);\r\n                        break;\r\n                    case 38:\r\n                        ableMove(0);\r\n                        break;\r\n                    case 39:\r\n                        ableMove(1);\r\n                        break;\r\n                    case 40:\r\n                        ableMove(2);\r\n                        break;\r\n                    case 32:\r\n                        that._myArr[0].fireBullet();\r\n                        break;\r\n                    default:\r\n                        that._continuing = false;\r\n                        break;\r\n                }\r\n            });\r\n            $(document).on('keyup', function (e) {\r\n                e.preventDefault();\r\n                disableMove();\r\n            });\r\n        },\r\n        gameOver: function () {\r\n            var that = this;\r\n            window.cancelAnimationFrame(that._requestId);\r\n            // that._stage.listening(true);\r\n            that.addOver();\r\n            that.uninit();\r\n        },\r\n        gameSuccess: function () {\r\n            var that = this;\r\n            window.cancelAnimationFrame(that._requestId);\r\n            // that._stage.listening(true);\r\n            that.addSuccess();\r\n            that.uninit();\r\n        },\r\n        createFoeTank: function (pos) {\r\n            var foeTank = new window.FoeTank(this._stage, this._layer);\r\n            foeTank.selectType();\r\n            switch (foeTank._tankType) {\r\n                case 0:\r\n                    foeTank.createTank(pos, this._tankType0);\r\n                    break;\r\n                case 1:\r\n                    foeTank.createTank(pos, this._tankType1);\r\n                    break;\r\n                case 2:\r\n                    foeTank.createTank(pos, this._tankType2);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this._foeArr.push(foeTank);\r\n        },\r\n        createMyTank: function (pos) {\r\n            var myTank = new window.MyTank(this._stage, this._layer);\r\n            myTank.createTank(pos, this._tankType3);\r\n            this._myArr.push(myTank);\r\n        },\r\n        passNumChange: function () {\r\n            var that = this;\r\n            if (that._passedNum == 0) {\r\n                that._totalText = new Konva.Text({\r\n                    fontSize: 20,\r\n                    fill: '#333',\r\n                    x: 20,\r\n                    y: 20,\r\n                    text: \"Total:\" + that._passedNum\r\n                });\r\n                that._layer.add(that._totalText);\r\n                that._layer.batchDraw();\r\n            } else {\r\n                that._totalText.text(\"Total:\" + that._passedNum);\r\n                that._layer.batchDraw();\r\n            };\r\n        }\r\n    };\r\n\r\n    window.Main = Main;\r\n\r\n})();"]}